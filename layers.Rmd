---
output:
  html_document:
    toc: true
    toc_float: true
---

<style>
.col2 {
columns: 2 200px;
-webkit-columns: 2 200px; /* chrome, safari */
-moz-columns: 2 200px;   /* firefox */
}
</style>


```{r setup, echo = FALSE, message = FALSE, warning = FALSE}
source(here::here("_site.R"))
short_layer_web <- file.path(bhiprep_gh_raw, "master", "supplement", "layer_summaries")

# lyrscsv <- readr::read_csv("https://raw.githubusercontent.com/OHI-Baltic/bhi/master/index/layers.csv")
# for(lyr in list.files(file.path(paste0(getwd(), "-prep"), "supplement", "layer_summaries"))){
#   if(RCurl::url.exists(file.path(short_layer_web, lyr))){
#     lyrinfo <- lyrscsv %>% 
#       filter(layer == str_remove(lyr, ".Rmd"))
#     
#     cat(str_replace(str_replace(
#       '### NAMEOFDATALAYER\n
#         ```{r, echo = FALSE, results = "hide"}
#         tmp <- tempfile(fileext = "Rmd")
#         on.exit(unlink(tmp))
#         download.file(file.path(short_layer_web, "FILENAMERMD"), tmp)
#         ```\n
#         ```{r, child = tmp, echo = FALSE, results = "asis"}
#         ```\n
#         ---\n
#       ',
#       "NAMEOFDATALAYER", lyrinfo$name),
#       "FILENAMERMD", lyr
#     ))
#   }
# }
```

<!-- #### LAYERS TABLE -->

<!-- ```{r} -->
<!-- format_df <- as.data.frame( -->
<!--   st0 %>%  -->
<!--     mutate(info = sprintf("[%s](http://ohi-science.org/bhi/layers.html#%s)", layer, web_name)) %>%  -->
<!--     select(Layer = info, Name = name, Targets = targets) -->
<!-- ) -->
<!-- layers_widget_formattable = formattable( -->
<!--   format_df, -->
<!--   align = c("l", "r", "r"), -->
<!--   list( -->
<!--     `Targets` = color_tile('lightblue', 'white'), -->
<!--     `Layer` = formatter("span", style = ~ style(color = "#78abaf", font.weight = "300")) -->
<!--   ) -->
<!-- ) -->
<!-- layers_widget_formattable -->
<!-- ``` -->

<!-- <br> -->

---

### Status of coastal fish stocks

```{r, echo = FALSE, results = "hide"}
tmp <- tempfile(fileext = "Rmd")
on.exit(unlink(tmp))
download.file(file.path(short_layer_web, "ao_stock_slope.Rmd"), tmp)
```

```{r, child = tmp, echo = FALSE, results = "asis"}
```

---

### Slope of coastal fish stocks to be used for trend

```{r, echo = FALSE, results = "hide"}
tmp <- tempfile(fileext = "Rmd")
on.exit(unlink(tmp))
download.file(file.path(short_layer_web, "ao_stock_status.Rmd"), tmp)
```

```{r, child = tmp, echo = FALSE, results = "asis"}
```

---

### Biodiversity trend for countries around the Baltic Sea.

```{r, echo = FALSE, results = "hide"}
tmp <- tempfile(fileext = "Rmd")
on.exit(unlink(tmp))
download.file(file.path(short_layer_web, "bd_spp_trend.Rmd"), tmp)
```

```{r, child = tmp, echo = FALSE, results = "asis"}
```

---

### Dioxin and dioxin-like PCB congeners TEQ sum by date and location

```{r, echo = FALSE, results = "hide"}
tmp <- tempfile(fileext = "Rmd")
on.exit(unlink(tmp))
download.file(file.path(short_layer_web, "cw_con_dioxin.Rmd"), tmp)
```

```{r, child = tmp, echo = FALSE, results = "asis"}
```

---

### PCB congeners concentrations sum by date and location

```{r, echo = FALSE, results = "hide"}
tmp <- tempfile(fileext = "Rmd")
on.exit(unlink(tmp))
download.file(file.path(short_layer_web, "cw_con_pcb.Rmd"), tmp)
```

```{r, child = tmp, echo = FALSE, results = "asis"}
```

---

### Penalty factor for contaminants subgoal

```{r, echo = FALSE, results = "hide"}
tmp <- tempfile(fileext = "Rmd")
on.exit(unlink(tmp))
download.file(file.path(short_layer_web, "cw_con_penalty.Rmd"), tmp)
```

```{r, child = tmp, echo = FALSE, results = "asis"}
```

---

### PFOS total concentration by date and location

```{r, echo = FALSE, results = "hide"}
tmp <- tempfile(fileext = "Rmd")
on.exit(unlink(tmp))
download.file(file.path(short_layer_web, "cw_con_pfos.Rmd"), tmp)
```

```{r, child = tmp, echo = FALSE, results = "asis"}
```

---

### Chlorophyll a concentrations

```{r, echo = FALSE, results = "hide"}
tmp <- tempfile(fileext = "Rmd")
on.exit(unlink(tmp))
download.file(file.path(short_layer_web, "cw_eut_chla.Rmd"), tmp)
```

```{r, child = tmp, echo = FALSE, results = "asis"}
```

---

### Dissolved inorganic nitrogen concentrations

```{r, echo = FALSE, results = "hide"}
tmp <- tempfile(fileext = "Rmd")
on.exit(unlink(tmp))
download.file(file.path(short_layer_web, "cw_eut_din.Rmd"), tmp)
```

```{r, child = tmp, echo = FALSE, results = "asis"}
```

---

### Dissolved inorganic phosphorus concentrations

```{r, echo = FALSE, results = "hide"}
tmp <- tempfile(fileext = "Rmd")
on.exit(unlink(tmp))
download.file(file.path(short_layer_web, "cw_eut_dip.Rmd"), tmp)
```

```{r, child = tmp, echo = FALSE, results = "asis"}
```

---

### Oxygen debt

```{r, echo = FALSE, results = "hide"}
tmp <- tempfile(fileext = "Rmd")
on.exit(unlink(tmp))
download.file(file.path(short_layer_web, "cw_eut_oxydebt.Rmd"), tmp)
```

```{r, child = tmp, echo = FALSE, results = "asis"}
```

---

### Secchi depths

```{r, echo = FALSE, results = "hide"}
tmp <- tempfile(fileext = "Rmd")
on.exit(unlink(tmp))
download.file(file.path(short_layer_web, "cw_eut_secchi.Rmd"), tmp)
```

```{r, child = tmp, echo = FALSE, results = "asis"}
```

---

### Eutrophication indicator targets

```{r, echo = FALSE, results = "hide"}
tmp <- tempfile(fileext = "Rmd")
on.exit(unlink(tmp))
download.file(file.path(short_layer_web, "cw_eut_targets.Rmd"), tmp)
```

```{r, child = tmp, echo = FALSE, results = "asis"}
```

---

### B/BMSY by stock and year

```{r, echo = FALSE, results = "hide"}
tmp <- tempfile(fileext = "Rmd")
on.exit(unlink(tmp))
download.file(file.path(short_layer_web, "fis_bbmsy.Rmd"), tmp)
```

```{r, child = tmp, echo = FALSE, results = "asis"}
```

---

### Cod Condition Penalty Factor

```{r, echo = FALSE, results = "hide"}
tmp <- tempfile(fileext = "Rmd")
on.exit(unlink(tmp))
download.file(file.path(short_layer_web, "fis_cod_penalty.Rmd"), tmp)
```

```{r, child = tmp, echo = FALSE, results = "asis"}
```

---

### F/FMSY by stock and year

```{r, echo = FALSE, results = "hide"}
tmp <- tempfile(fileext = "Rmd")
on.exit(unlink(tmp))
download.file(file.path(short_layer_web, "fis_ffmsy.Rmd"), tmp)
```

```{r, child = tmp, echo = FALSE, results = "asis"}
```

---

### Landings by stock and year

```{r, echo = FALSE, results = "hide"}
tmp <- tempfile(fileext = "Rmd")
on.exit(unlink(tmp))
download.file(file.path(short_layer_web, "fis_landings.Rmd"), tmp)
```

```{r, child = tmp, echo = FALSE, results = "asis"}
```

---

### Estimated annual growth rate per marine sector

```{r, echo = FALSE, results = "hide"}
tmp <- tempfile(fileext = "Rmd")
on.exit(unlink(tmp))
download.file(file.path(short_layer_web, "le_eco_bluegrowth_rates.Rmd"), tmp)
```

```{r, child = tmp, echo = FALSE, results = "asis"}
```

---

### Estimated annual gross value added per marine sector, normalized by total GVA from marine sectors

```{r, echo = FALSE, results = "hide"}
tmp <- tempfile(fileext = "Rmd")
on.exit(unlink(tmp))
download.file(file.path(short_layer_web, "le_eco_yearly_gva.Rmd"), tmp)
```

```{r, child = tmp, echo = FALSE, results = "asis"}
```

---

### Number of people employed nationally based on national employment rates

```{r, echo = FALSE, results = "hide"}
tmp <- tempfile(fileext = "Rmd")
on.exit(unlink(tmp))
download.file(file.path(short_layer_web, "le_liv_national_employ.Rmd"), tmp)
```

```{r, child = tmp, echo = FALSE, results = "asis"}
```

---

### Number of people employed in each BHI region 25km buffer based on Eurostat NUTS2 level employment rates

```{r, echo = FALSE, results = "hide"}
tmp <- tempfile(fileext = "Rmd")
on.exit(unlink(tmp))
download.file(file.path(short_layer_web, "le_liv_regional_employ.Rmd"), tmp)
```

```{r, child = tmp, echo = FALSE, results = "asis"}
```

---

### Mariculture harvest

```{r, echo = FALSE, results = "hide"}
tmp <- tempfile(fileext = "Rmd")
on.exit(unlink(tmp))
download.file(file.path(short_layer_web, "mar_harvest.Rmd"), tmp)
```

```{r, child = tmp, echo = FALSE, results = "asis"}
```

---

### B/BMSY by stock and year of Sprat

```{r, echo = FALSE, results = "hide"}
tmp <- tempfile(fileext = "Rmd")
on.exit(unlink(tmp))
download.file(file.path(short_layer_web, "np_bbmsy.Rmd"), tmp)
```

```{r, child = tmp, echo = FALSE, results = "asis"}
```

---

### F/FMSY by stock and year of Sprat

```{r, echo = FALSE, results = "hide"}
tmp <- tempfile(fileext = "Rmd")
on.exit(unlink(tmp))
download.file(file.path(short_layer_web, "np_ffmsy.Rmd"), tmp)
```

```{r, child = tmp, echo = FALSE, results = "asis"}
```

---

### Landings by stock and year of Sprat

```{r, echo = FALSE, results = "hide"}
tmp <- tempfile(fileext = "Rmd")
on.exit(unlink(tmp))
download.file(file.path(short_layer_web, "np_landings.Rmd"), tmp)
```

```{r, child = tmp, echo = FALSE, results = "asis"}
```

---

### IUCN Red List threat categories for species on Baltic Sea Iconic Species list

```{r, echo = FALSE, results = "hide"}
tmp <- tempfile(fileext = "Rmd")
on.exit(unlink(tmp))
download.file(file.path(short_layer_web, "sp_ico_assessments.Rmd"), tmp)
```

```{r, child = tmp, echo = FALSE, results = "asis"}
```

---

### Average accommodations (nights stayed) in coastal regions per unit area

```{r, echo = FALSE, results = "hide"}
tmp <- tempfile(fileext = "Rmd")
on.exit(unlink(tmp))
download.file(file.path(short_layer_web, "tr_accommodations.Rmd"), tmp)
```

```{r, child = tmp, echo = FALSE, results = "asis"}
```

---

### Estimated annual gross value added of accommodations and transport activities from the coastal tourism sector

```{r, echo = FALSE, results = "hide"}
tmp <- tempfile(fileext = "Rmd")
on.exit(unlink(tmp))
download.file(file.path(short_layer_web, "tr_coastal_tourism_gva.Rmd"), tmp)
```

```{r, child = tmp, echo = FALSE, results = "asis"}
```

---
