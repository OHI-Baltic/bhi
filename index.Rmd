---
output:
  html_document:
    fig_width: 1
    toc: false
    css: css/extra.css
---

<!-- Welcome page title -->

<div class="page-lead" style="background-image:url(images/banner-image.jpg);padding-top:160px">
<div class="wrap page-lead-content">
<h3 style="background-color:#0d4353d4;color:#f3ffe1;line-height:58px;font-size:220%;padding-left:200px;">  
AN OCEAN HEALTH INDEX FOR THE BALTIC SEA 
</h3>
</div>
</div>

<!-- <h3 style="background-color:#041c23d4;color:#f3ffe1;line-height:60px;font-size:220%;padding-left:180px;"> -->
<!-- AN OCEAN HEALTH INDEX FOR THE BALTIC SEA -->
<!-- </h3> -->

<br>

<!-- About the Index -->

<div class="wrap page-lead-content" style="background-color:#edf3f5b6;padding-left:10px;padding-right:10px;font-family:PT Sans;">
<h4 style="color:#0a1821;line-height:50px;font-weight:400;">
The Ocean Health Index (OHI)
</h4>

The Ocean Health Index (OHI) measures and tracks the benefits and services that the ocean provides for people now and into the future. The OHI does this by measuring progress towards widely held goals that represent key benefits and services provided by marine ecosystems. By analyzing these goals together we obtain a comprehensive picture of the state of the ecosystem.

The framework facilitates [transparent and repeatable assessments](https://www.nature.com/articles/s41559-017-0160) of ocean health over time, and can be integrated into ongoing policy initiatives to support sustainable ocean management.

<br> 
</div>

<!-- This Project -->

<div class="wrap page-lead-content" style="background-color:#edf3f5b6;padding-left:10px;padding-right:10px;font-family:PT Sans;">
<h4 style="color:#0a1821;line-height:50px;font-weight:400;">
Quantifying status of the Baltic Sea
</h4>

The Baltic Health Index (BHI) is a regional study applying the OHI framework (known as OHI+). The aim is to provide an integrative and transparent tool to be used by decision-makers to guide management of the Baltic Sea towards increased sustainability.

In a first iteration, the BHI was adapted from previous OHI assessments [tailoring the OHI framework](https://peerj.com/articles/1503/) to represent the cultural, social, and ecological characteristics and priorities of Baltic using the best available information and knowledge. Subsequent iterations will further develop models specific to the Baltic Sea, and implement more automized routines for data collection and processing.

<br> 
</div>

<div class="page-lead" style="background-image:url(images/bhi-goals.jpg);padding-top:160px">
<div class="wrap page-lead-content">
<h3 style="background-color:#0d4353d4;color:#f3ffe1;line-height:40px;padding-left:200px;">  
BALTIC HEALTH INDEX GOALS
</h3>
</div>
</div>

<!-- Assessment Regions -->

<div class="wrap page-lead-content" style="background-color:#edf3f5b6;padding-left:10px;padding-right:10px;font-family:PT Sans;">
<h4 style="color:#0a1821;line-height:50px;font-weight:400;">
Assessment Regions
</h4>

Regions are the fundamental spatial units of analysis for the Ocean Health Index. Scores are calculated for each region individually and then combined (with an offshore area-weighted average) to produce scores for the entire Baltic Sea.  There are 42 BHI regions in the Baltic Sea, created by intersecting exclusive economnic zones (EEZs) with the Baltic Sea subbasins, and splitting the Finnish Archipelago Sea into it's own region according to WFD boundaries.

<br> 
</div>

```{r setup, echo = F, warning = FALSE, message = F}
source("_site.R")
## read spatial
geojson <- file.path("regions_gcs_simple2x.geojson")
rgns <- geojsonio::geojson_read(geojson, what = "sp")
if("rgn_nam" %in% names(rgns@data) & !"rgn_name" %in% names(rgns@data)){
  rgns@data = rgns@data %>% mutate(rgn_name = rgn_nam)
}
```

```{r, out.width = '100%'}
## create and render leaflet map
leaflet::leaflet(data = rgns, height = 600) %>%
  addProviderTiles(providers$Esri.OceanBasemap) %>%
  setView(18, 60, zoom = 5) %>%
  addPolygons(
    layerId = ~rgn_id,
    stroke = TRUE, opacity = 0.5, weight = 2, fillOpacity = 0.5, smoothFactor = 0.5,
    color = ~colorNumeric("#6fa0b4", rgns$rgn_id)(rgn_id)) %>%
  addPolygons(
    layerId = ~rgn_id,
    popup = paste("<h5><strong>", "Region:", "</strong>",
                  rgns@data$rgn_nam,"</h5>",
                  "<h5><strong>", "Region BHI ID:", "</strong>", rgns@data$rgn_id, "</h5>"),
    fillOpacity = 0,
    stroke = FALSE
  ) %>% 
  htmlwidgets::onRender("
  function(el, t) {
    var defaultStyle = {
      // stroke, ie polygon border
        opacity:     0.5,
        weight:      2,
      // fill, ie polygon interior
        fillOpacity: 0.5,
    };
    var highlightStyle = {
      // stroke, ie polygon border
        opacity:     0.9,
        weight:      6,
      // fill, ie polygon interior
        fillOpacity: 0.9,
    };
    var myMap = this;
    var layers = myMap._layers;
    for(var i in layers) {
      var layer = layers[i];
      if(layer.label) {
        layer.on('mouseover',
          function(e) {
            this.setStyle(highlightStyle);
            // this.bringToFront();
        });
        layer.on('mouseout',
          function(e) {
            this.setStyle(defaultStyle);
            // this.bringToBack();
        });
      }
    }
  }")
```

